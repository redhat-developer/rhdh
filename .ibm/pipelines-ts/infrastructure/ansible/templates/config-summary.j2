{
  "generation": {
    "timestamp": "{{ generation_timestamp }}",
    "ansible_version": "{{ ansible_version.full }}",
    "generator": "RHDH Ansible Configuration Generator"
  },
  "configuration": {{ configuration | to_nice_json }},
  "files": {
    "generated": {{ (generated_files + rbac_files) | to_nice_json }},
    "location": "{{ output_dir }}/{{ cluster_type }}",
    "total_count": {{ (generated_files + rbac_files) | length }}
  },
  "deployment": {
    "helm_command": "helm install rhdh -f {{ output_dir }}/{{ cluster_type }}/values.yaml",
    "kubectl_secrets": "kubectl apply -f {{ output_dir }}/{{ cluster_type }}/secrets.yaml",
    "kubectl_configmaps": "kubectl apply -f {{ output_dir }}/{{ cluster_type }}/configmap.yaml"{% if rbac_enabled %},
    "rbac_helm_command": "helm install rhdh-rbac -f {{ output_dir }}/{{ cluster_type }}/values-rbac.yaml",
    "rbac_kubectl_secrets": "kubectl apply -f {{ output_dir }}/{{ cluster_type }}/secrets-rbac.yaml",
    "rbac_kubectl_configmaps": "kubectl apply -f {{ output_dir }}/{{ cluster_type }}/configmap-rbac.yaml"{% endif %}
  },
  "validation": {
    "helm_template_check": "helm template test /dev/null -f {{ output_dir }}/{{ cluster_type }}/values.yaml --validate",
    "kubectl_dry_run": "kubectl apply --dry-run=client -f <file>"
  },
  "next_steps": [
    "Review generated configurations",
    "Apply secrets to cluster",
    "Apply configmaps to cluster",
    "Deploy RHDH with Helm"{% if rbac_enabled %},
    "Deploy RBAC instance with Helm"{% endif %}
  ]
} 