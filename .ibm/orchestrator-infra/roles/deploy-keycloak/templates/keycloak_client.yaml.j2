apiVersion: keycloak.org/v1alpha1
kind: KeycloakClient
metadata:
  labels:
    app: rhsso-openshift
  name: rhdh
  namespace: rhsso-operator
spec:
  client:
    enabled: true
    clientAuthenticatorType: client-secret
    clientId: rhdh
    name: rhdh
    serviceAccountsEnabled: true
    redirectUris:
      - "*"
    clientId: rhdh
    secret: rhdh
    defaultClientScopes:
    - web-origins
    - profile
    - email
    - roles
    - address
    - phone
    - offline_access
    implicitFlowEnabled: true
    publicClient: false
    standardFlowEnabled: true
    fullScopeAllowed: true
    directAccessGrantsEnabled: true
    consentRequired: false
    protocolMappers:
    - config:
        access.token.claim: "true"
        claim.name: sub
        id.token.claim: "true"
        jsonType.label: String
        user.attribute: username
        userinfo.token.claim: "true"
      name: backstage-uid
      protocol: openid-connect
      protocolMapper: oidc-usermodel-property-mapper

  serviceAccountRealmRoles:
  - priv-client
  realmSelector:
    matchLabels:
      app: sso-idp
